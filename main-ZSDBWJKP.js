import{a as m}from"./chunk-BMQE7F7G.js";import{a as w,c as j,d as p,e as H,f as B,g as F}from"./chunk-EYZZHLEG.js";import{$b as M,Ga as b,La as f,P as u,T as a,Wa as h,Ya as A,Z as x,_ as I,ab as r,bb as i,cb as L,fc as E,gb as y,gc as D,ha as R,ia as k,ib as _,jb as S,tb as n,vb as N,wa as d}from"./chunk-NDO7E3F7.js";var l=class t{constructor(o,e){this.authService=o;this.router=e}canActivate(o,e){return this.authService.isLoggedIn()?!0:(this.router.navigate(["/login"]),!1)}static \u0275fac=function(e){return new(e||t)(a(m),a(p))};static \u0275prov=u({token:t,factory:t.\u0275fac,providedIn:"root"})};var c=class t{constructor(o,e){this.authService=o;this.router=e}canActivate(o,e){return this.authService.isLoggedIn()?(this.router.navigate(["/"]),!1):!0}static \u0275fac=function(e){return new(e||t)(a(m),a(p))};static \u0275prov=u({token:t,factory:t.\u0275fac,providedIn:"root"})};var P=[{path:"",loadComponent:()=>import("./chunk-HFWYS2A7.js").then(t=>t.MovieList)},{path:"my-bookings",loadComponent:()=>import("./chunk-AYYBRKYU.js").then(t=>t.MyBookings),canActivate:[l]},{path:"booking/:movieName/:theatreName",loadComponent:()=>import("./chunk-MM4S6KMU.js").then(t=>t.BookingPage),canActivate:[l]},{path:"login",loadComponent:()=>import("./chunk-GS6PDJZP.js").then(t=>t.Login),canActivate:[c]},{path:"register",loadComponent:()=>import("./chunk-QFMVU6KY.js").then(t=>t.Register),canActivate:[c]},{path:"forgot",loadComponent:()=>import("./chunk-FMNYJFZP.js").then(t=>t.Forgot),canActivate:[c]},{path:"**",pathMatch:"full",redirectTo:""}];var V=(t,o)=>{let e=localStorage.getItem("token");return e&&(t=t.clone({setHeaders:{Authorization:`Bearer ${e}`}})),o(t)};var O={providers:[R(),B(P),E(D([V]))]};function J(t,o){t&1&&(r(0,"li",4)(1,"a",7),n(2,"MyBookings"),i()())}function K(t,o){if(t&1){let e=y();r(0,"span",8),n(1),i(),r(2,"button",9),_("click",function(){x(e);let z=S();return I(z.logout())}),n(3,"Logout"),i()}if(t&2){let e=S();d(),N("Hi, ",e.userID)}}function Q(t,o){t&1&&(r(0,"button",10),n(1,"Login"),i(),r(2,"span",11),n(3,"or"),i(),r(4,"button",12),n(5,"Register"),i())}var v=class t{constructor(o,e){this.router=o;this.auth=e;this.userID=e.userID,this.isLoggedIn=e.isLoggedIn(),this.isAdmin=e.isAdmin()}isLoggedIn=!1;userID=null;isAdmin=!1;logout(){this.auth.logout(),window.location.reload()}static \u0275fac=function(e){return new(e||t)(b(p),b(m))};static \u0275cmp=f({type:t,selectors:[["app-navbar"]],decls:12,vars:2,consts:[["data-bs-theme","dark",1,"navbar","fixed-top","bg-body-tertiary"],[1,"container-fluid"],["routerLink","/",1,"navbar-brand"],[1,"navbar-nav","me-auto","flex-row"],[1,"nav-item","me-3"],["aria-current","page","routerLink","/",1,"nav-link","active"],[1,"d-flex"],["routerLink","/my-bookings",1,"nav-link"],[1,"navbar-text","fw-bold","me-5"],[1,"btn","btn-sm","btn-outline-danger",3,"click"],["routerLink","/login",1,"btn","btn-outline-success","me-2"],[1,"navbar-text","mx-2"],["routerLink","/register",1,"btn","btn-outline-success","ms-2"]],template:function(e,s){e&1&&(r(0,"nav",0)(1,"div",1)(2,"a",2),n(3,"MovieBooking App"),i(),r(4,"ul",3)(5,"li",4)(6,"a",5),n(7,"Home"),i()(),h(8,J,3,0,"li",4),i(),r(9,"div",6),h(10,K,4,1)(11,Q,6,0),i()()()),e&2&&(d(8),A(s.isLoggedIn&&!s.isAdmin?8:-1),d(2),A(s.isLoggedIn?10:11))},dependencies:[M,F,H],encapsulation:2})};var g=class t{title=k("MovieBookingApp_Angular");static \u0275fac=function(e){return new(e||t)};static \u0275cmp=f({type:t,selectors:[["app-root"]],decls:2,vars:0,template:function(e,s){e&1&&L(0,"app-navbar")(1,"router-outlet")},dependencies:[j,v],encapsulation:2})};w(g,O).catch(t=>console.error(t));
