import{a as I}from"./chunk-GIYV7ABN.js";import{a as w,b as m,c as S,d as x,f as N,h as R,i as T,j as D,l as F}from"./chunk-HI2BIXZA.js";import{d as h}from"./chunk-EYZZHLEG.js";import{$a as p,$b as E,Db as C,Ga as u,La as g,Wa as s,Ya as l,Yb as b,ab as r,bb as t,cb as c,ib as v,jb as f,tb as a,vb as _,wa as d}from"./chunk-NDO7E3F7.js";var q=(e,i)=>({"text-success":e,"text-danger":i});function P(e,i){e&1&&(r(0,"div",5),a(1,"First name is required."),t())}function L(e,i){e&1&&(r(0,"div",5),a(1,"Last name is required."),t())}function M(e,i){e&1&&(r(0,"div",5),a(1,"Login ID is required."),t())}function U(e,i){e&1&&(r(0,"div",5),a(1,"Email is required."),t())}function A(e,i){e&1&&(r(0,"div",5),a(1,"Enter a valid email address."),t())}function V(e,i){if(e&1&&(s(0,U,2,0,"div",5),s(1,A,2,0,"div",5)),e&2){let n=f();l(n.f.emailID.errors.required?0:-1),d(),l(n.f.emailID.errors.email?1:-1)}}function j(e,i){e&1&&(r(0,"div",5),a(1,"Password is required."),t())}function G(e,i){e&1&&(r(0,"div",5),a(1,"Password must be at least 8 characters long."),t())}function B(e,i){e&1&&(r(0,"div",5),a(1,"Password must include at least one number."),t())}function z(e,i){e&1&&(r(0,"div",5),a(1,"Password must include at least one lowercase letter."),t())}function O(e,i){e&1&&(r(0,"div",5),a(1,"Password must include at least one uppercase letter."),t())}function Z(e,i){e&1&&(r(0,"div",5),a(1,"Password must include at least one special character."),t())}function k(e,i){if(e&1&&(s(0,j,2,0,"div",5),s(1,G,2,0,"div",5),s(2,B,2,0,"div",5),s(3,z,2,0,"div",5),s(4,O,2,0,"div",5),s(5,Z,2,0,"div",5)),e&2){let n=f();l(n.f.password.errors.required?0:-1),d(),l(n.f.password.errors.minLength?1:-1),d(),l(n.f.password.errors.missingNumber?2:-1),d(),l(n.f.password.errors.missingLowercase?3:-1),d(),l(n.f.password.errors.missingUppercase?4:-1),d(),l(n.f.password.errors.missingSpecialChar?5:-1)}}function $(e,i){e&1&&(r(0,"div",5),a(1,"Passwords do not match."),t())}function H(e,i){e&1&&(r(0,"div",5),a(1,"Enter a valid 10-digit number."),t())}function J(e,i){if(e&1&&(r(0,"div",14),a(1),t()),e&2){let n=f();p("ngClass",C(2,q,n.message.includes("successful"),n.message.includes("failed"))),d(),_(" ",n.message," ")}}function K(e){let i=e.value;if(!i)return{required:!0};let n={};return/.{8,}/.test(i)||(n.minLength=!0),/[0-9]/.test(i)||(n.missingNumber=!0),/[a-z]/.test(i)||(n.missingLowercase=!0),/[A-Z]/.test(i)||(n.missingUppercase=!0),/[^A-Za-z0-9]/.test(i)||(n.missingSpecialChar=!0),Object.keys(n).length>0?n:null}function Q(e){let i=e.get("password")?.value,n=e.get("confirmPassword")?.value;return i===n?null:{passwordsMismatch:!0}}var y=class e{constructor(i,n,o){this.fb=i;this.userService=n;this.router=o;this.registerForm=this.fb.group({firstName:["",m.required],lastName:["",m.required],loginID:["",m.required],emailID:["",[m.required,m.email]],password:["",[m.required,K]],confirmPassword:["",m.required],contactNumber:["",[m.required,m.pattern("^[6-9][0-9]{9}$")]],userRole:["CUSTOMER",m.required]},{validators:Q})}registerForm;message=null;submitted=!1;get f(){return this.registerForm.controls}submit(){this.submitted=!0,!this.registerForm.invalid&&this.userService.userRegister(this.registerForm.value).subscribe({next:i=>{this.message="Registration successful! Please login.",this.router.navigate(["/login"])},error:i=>this.message="Registration failed: "+i.message})}static \u0275fac=function(n){return new(n||e)(u(D),u(I),u(h))};static \u0275cmp=g({type:e,selectors:[["app-register"]],decls:47,vars:9,consts:[["novalidate","",1,"m-5","p-4","border","rounded","shadow-sm","bg-light","mx-auto",2,"max-width","500px",3,"ngSubmit","formGroup"],[1,"text-center","mb-4"],[1,"mb-3"],[1,"form-label"],["formControlName","firstName","placeholder","Enter your first name",1,"form-control"],[1,"text-danger","small","mt-1"],["formControlName","lastName","placeholder","Enter your last name",1,"form-control"],["formControlName","loginID","placeholder","Choose a login ID",1,"form-control"],["type","email","formControlName","emailID","placeholder","Enter your email address",1,"form-control"],["type","password","formControlName","password","placeholder","Create a password",1,"form-control"],["type","password","formControlName","confirmPassword","placeholder","Re-enter your password",1,"form-control"],["formControlName","contactNumber","placeholder","Enter your contact number",1,"form-control"],[1,"d-grid"],["type","submit",1,"btn","btn-primary"],[1,"text-center","mt-3",3,"ngClass"],[1,"text-center","mt-3"],["href","/login",1,"text-decoration-none"]],template:function(n,o){n&1&&(r(0,"form",0),v("ngSubmit",function(){return o.submit()}),r(1,"h2",1),a(2,"Register"),t(),r(3,"div",2)(4,"label",3),a(5,"First Name"),t(),c(6,"input",4),s(7,P,2,0,"div",5),t(),r(8,"div",2)(9,"label",3),a(10,"Last Name"),t(),c(11,"input",6),s(12,L,2,0,"div",5),t(),r(13,"div",2)(14,"label",3),a(15,"Login ID"),t(),c(16,"input",7),s(17,M,2,0,"div",5),t(),r(18,"div",2)(19,"label",3),a(20,"Email"),t(),c(21,"input",8),s(22,V,2,2),t(),r(23,"div",2)(24,"label",3),a(25,"Password"),t(),c(26,"input",9),s(27,k,6,6),t(),r(28,"div",2)(29,"label",3),a(30,"Confirm Password"),t(),c(31,"input",10),s(32,$,2,0,"div",5),t(),r(33,"div",2)(34,"label",3),a(35,"Contact Number"),t(),c(36,"input",11),s(37,H,2,0,"div",5),t(),r(38,"div",12)(39,"button",13),a(40,"Register"),t()(),s(41,J,2,5,"div",14),r(42,"div",15)(43,"span"),a(44,"Already have an account? "),t(),r(45,"a",16),a(46,"Login"),t()()()),n&2&&(p("formGroup",o.registerForm),d(7),l((o.f.firstName.touched||o.submitted)&&o.f.firstName.invalid?7:-1),d(5),l((o.f.lastName.touched||o.submitted)&&o.f.lastName.invalid?12:-1),d(5),l((o.f.loginID.touched||o.submitted)&&o.f.loginID.invalid?17:-1),d(5),l((o.f.emailID.touched||o.submitted)&&o.f.emailID.errors?22:-1),d(5),l((o.f.password.touched||o.submitted)&&o.f.password.errors?27:-1),d(5),l((o.submitted||o.f.confirmPassword.touched)&&(o.registerForm.errors!=null&&o.registerForm.errors.passwordsMismatch)?32:-1),d(5),l((o.f.contactNumber.touched||o.submitted)&&o.f.contactNumber.invalid?37:-1),d(4),l(o.message?41:-1))},dependencies:[E,b,F,N,w,S,x,T,R],encapsulation:2})};export{y as Register};
